<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grow A Garden - Real-Time Stock Tracker</title>
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #8BC34A;
            --accent: #FFC107;
            --dark: #2E7D32;
            --light: #F1F8E9;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light);
            color: #333;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .card-title {
            font-weight: bold;
            color: var(--dark);
            margin: 0;
        }
        
        .card-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            margin: 0.5rem 0;
        }
        
        .card-change {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .up {
            color: #4CAF50;
        }
        
        .down {
            color: #F44336;
        }
        
        .neutral {
            color: #9E9E9E;
        }
        
        .refresh-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 1rem;
            display: block;
            width: 100%;
            font-weight: bold;
        }
        
        .refresh-btn:hover {
            background-color: var(--dark);
        }
        
        .last-updated {
            text-align: right;
            font-size: 0.8rem;
            color: #757575;
            margin-top: 1rem;
        }
        
        .search-bar {
            margin: 1rem 0;
            display: flex;
        }
        
        .search-bar input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
        }
        
        .search-bar button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }
        
        .notification {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            background-color: var(--accent);
            color: #333;
            padding: 1rem;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transform: translateX(120%);
            transition: transform 0.3s;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Grow A Garden Stock Tracker</h1>
        <p>Real-time updates for seeds, equipment, eggs, weather, and more</p>
    </header>
    
    <div class="container">
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search for items...">
            <button id="searchBtn">Search</button>
        </div>
        
        <div class="dashboard" id="dashboard">
            <!-- Cards will be dynamically inserted here -->
        </div>
        
        <button class="refresh-btn" id="refreshBtn">Refresh All Data</button>
        <div class="last-updated" id="lastUpdated">Last updated: Never</div>
    </div>
    
    <div class="notification" id="notification">
        <div id="notificationMessage"></div>
    </div>
    
    <script>
        // Sample data - in a real app, this would come from a server
        const stockData = {
            seeds: {
                sunflower: { current: 150, previous: 120, trend: 'up' },
                tomato: { current: 85, previous: 90, trend: 'down' },
                carrot: { current: 110, previous: 110, trend: 'neutral' },
                pumpkin: { current: 45, previous: 60, trend: 'down' },
                strawberry: { current: 75, previous: 70, trend: 'up' }
            },
            equipment: {
                watering_can: { current: 32, previous: 30, trend: 'up' },
                shovel: { current: 28, previous: 28, trend: 'neutral' },
                gloves: { current: 15, previous: 20, trend: 'down' },
                fertilizer: { current: 50, previous: 45, trend: 'up' }
            },
            eggs: {
                chicken: { current: 18, previous: 15, trend: 'up' },
                duck: { current: 10, previous: 12, trend: 'down' },
                quail: { current: 8, previous: 8, trend: 'neutral' },
                golden: { current: 2, previous: 1, trend: 'up' }
            },
            weather: {
                sunny: { current: 65, previous: 60, trend: 'up' },
                rainy: { current: 20, previous: 25, trend: 'down' },
                cloudy: { current: 15, previous: 15, trend: 'neutral' }
            },
            special: {
                magic_beans: { current: 5, previous: 10, trend: 'down' },
                rainbow_flowers: { current: 3, previous: 2, trend: 'up' },
                ancient_seeds: { current: 1, previous: 1, trend: 'neutral' }
            }
        };
        
        // DOM elements
        const dashboard = document.getElementById('dashboard');
        const refreshBtn = document.getElementById('refreshBtn');
        const lastUpdated = document.getElementById('lastUpdated');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        
        // Format category names for display
        function formatCategoryName(category) {
            return category.split('_').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
        }
        
        // Format item names for display
        function formatItemName(item) {
            return item.split('_').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
        }
        
        // Calculate percentage change
        function calculateChange(current, previous) {
            if (previous === 0) return 0;
            return ((current - previous) / previous) * 100;
        }
        
        // Show notification
        function showNotification(message) {
            notificationMessage.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Create a stock card
        function createStockCard(category, item, data) {
            const change = calculateChange(data.current, data.previous);
            const changeFormatted = change.toFixed(1);
            
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.category = category;
            card.dataset.item = item;
            
            card.innerHTML = `
                <div class="card-header">
                    <h3 class="card-title">${formatItemName(item)}</h3>
                    <span class="card-change ${data.trend}">
                        ${data.trend === 'up' ? '↑' : data.trend === 'down' ? '↓' : '→'} 
                        ${Math.abs(changeFormatted)}%
                    </span>
                </div>
                <div class="card-value">${data.current}</div>
                <div>Available in stock</div>
                <small>Category: ${formatCategoryName(category)}</small>
            `;
            
            return card;
        }
        
        // Update the dashboard with current stock data
        function updateDashboard(data = stockData, filter = '') {
            dashboard.innerHTML = '';
            
            for (const category in data) {
                for (const item in data[category]) {
                    const itemData = data[category][item];
                    const itemName = formatItemName(item).toLowerCase();
                    const categoryName = formatCategoryName(category).toLowerCase();
                    
                    // Apply filter if one exists
                    if (filter === '' || 
                        itemName.includes(filter.toLowerCase()) || 
                        categoryName.includes(filter.toLowerCase())) {
                        const card = createStockCard(category, item, itemData);
                        dashboard.appendChild(card);
                    }
                }
            }
            
            // Update last updated time
            const now = new Date();
            lastUpdated.textContent = `Last updated: ${now.toLocaleTimeString()}`;
        }
        
        // Simulate real-time updates
        function simulateRealTimeUpdates() {
            // In a real app, this would be a WebSocket connection or API polling
            setInterval(() => {
                // Randomly update some items
                const categories = Object.keys(stockData);
                const randomCategory = categories[Math.floor(Math.random() * categories.length)];
                const items = Object.keys(stockData[randomCategory]);
                const randomItem = items[Math.floor(Math.random() * items.length)];
                
                // Save previous value
                const previousValue = stockData[randomCategory][randomItem].current;
                
                // Generate new random value (between 1 and 200 for this demo)
                const newValue = Math.max(1, Math.floor(Math.random() * 200));
                stockData[randomCategory][randomItem].current = newValue;
                
                // Update trend
                if (newValue > previousValue) {
                    stockData[randomCategory][randomItem].trend = 'up';
                } else if (newValue < previousValue) {
                    stockData[randomCategory][randomItem].trend = 'down';
                } else {
                    stockData[randomCategory][randomItem].trend = 'neutral';
                }
                
                // Update previous value for next comparison
                stockData[randomCategory][randomItem].previous = previousValue;
                
                // Update the dashboard
                updateDashboard();
                
                // Show notification for significant changes
                const change = calculateChange(newValue, previousValue);
                if (Math.abs(change) > 20) {
                    showNotification(
                        `${formatItemName(randomItem)} stock ${change > 0 ? 'increased' : 'decreased'} by ${Math.abs(change).toFixed(1)}%`
                    );
                }
            }, 5000); // Update every 5 seconds for demo purposes
        }
        
        // Event listeners
        refreshBtn.addEventListener('click', () => {
            // In a real app, this would fetch fresh data from the server
            updateDashboard();
            showNotification('Data refreshed successfully');
        });
        
        searchBtn.addEventListener('click', () => {
            updateDashboard(stockData, searchInput.value);
        });
        
        searchInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                updateDashboard(stockData, searchInput.value);
            }
        });
        
        // Initialize the dashboard
        updateDashboard();
        
        // Start simulated real-time updates
        simulateRealTimeUpdates();
    </script>
</body>
</html>
